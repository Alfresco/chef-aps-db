# When editing this file, remember that http://www.yamllint.com is your friend :-)
---
driver:
  name: docker
  use_sudo: false

provisioner:
  name: chef_zero
  require_chef_omnibus: 12.19.36

verifier:
  name: inspec

platforms:
  - name: centos-7
    driver_config:
      image: centos:7.2.1511
      platform: centos
      run_command: /usr/sbin/init
      privileged: true
      # hostname: mysqlhost.local
      # forward:
      # - 3306:3306

suites:
  - name: mysql
    run_list:
      - recipe[aps-db::default]
    verifier:
      inspec_tests:
        - name: chef-aps-inspec-mysql
          git: https://github.com/Alfresco/chef-aps-inspec-mysql
    attributes: {
      'aps-db' : {
        'engine' : 'mysql'
        }
      }
  - name: postgres
    run_list:
      - recipe[aps-db::default]
    verifier:
      inspec_tests:
        - name: chef-aps-inspec-postgres
          git: https://github.com/Alfresco/chef-aps-inspec-postgres
    attributes: {
      'aps-db' : {
        'engine' : 'postgres'
        }
      }
